<script>
    const appid = 'dmVyPTIwMjUwNyZpZD1YcTQ2bjJjcU1rJmhhc2g9TlRRNVpURTJZakEyTVRKbVl6TTVZUQ';
    
    // 中略（UIやMap設定は維持さ）

    function startScan() {
        // ...中略...

        // 【最強の検索クエリ】
        // 有機・オーガニック系、自然食品、ヴィーガン、マクロビ、無添加を網羅
        const keywords = [
            'オーガニック', 
            'ORGANIC', 
            '有機', 
            '自然食品', 
            '無添加', 
            'ヴィーガン', 
            'VEGAN', 
            'マクロビオティック', 
            '健康食品'
        ];
        const queryKeywords = keywords.join(' OR ');

        // 検索半径を10kmに設定し、結果上限を50件に
        const url = `https://map.yahooapis.jp/search/local/V1/localSearch?appid=${appid}&lat=${center.lat}&lon=${center.lng}&dist=10&query=${encodeURIComponent(queryKeywords)}&results=50&output=json&callback=handleResponse`;

        const script = document.createElement('script');
        script.src = url;
        script.id = "api-script";
        document.body.appendChild(script);

        // ...後略...
    }
</script>
